<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Risk Tolerance & Risk Aversion Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Source+Serif+4:ital,wght@0,300;0,400;0,600;1,300&display=swap" rel="stylesheet">
<style>
  :root {
    --ink: #1a1208;
    --paper: #f5f0e8;
    --cream: #ede7d5;
    --gold: #b8860b;
    --gold-light: #d4a017;
    --rust: #8b2500;
    --moss: #2d4a1e;
    --rule: #c8b89a;
    --shadow: rgba(26,18,8,0.15);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Source Serif 4', Georgia, serif;
    background: var(--paper);
    color: var(--ink);
    min-height: 100vh;
    padding: 2rem 1rem 4rem;
    background-image: 
      repeating-linear-gradient(0deg, transparent, transparent 27px, var(--rule) 27px, var(--rule) 28px);
  }

  .cover {
    max-width: 760px;
    margin: 0 auto 3rem;
    text-align: center;
    padding: 2.5rem 2rem;
    background: var(--cream);
    border: 2px solid var(--gold);
    border-top: 6px solid var(--gold);
    box-shadow: 4px 4px 0 var(--gold), 8px 8px 0 rgba(184,134,11,0.2);
    position: relative;
  }

  .cover::before {
    content: '';
    position: absolute;
    inset: 6px;
    border: 1px solid var(--rule);
    pointer-events: none;
  }

  .course-tag {
    font-size: 0.7rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 0.5rem;
    font-weight: 600;
  }

  h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.8rem, 5vw, 2.8rem);
    font-weight: 900;
    line-height: 1.1;
    color: var(--ink);
    margin-bottom: 0.4rem;
  }

  .subtitle {
    font-size: 1rem;
    font-style: italic;
    color: var(--gold);
    margin-bottom: 1.2rem;
  }

  .divider {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    margin: 1rem 0;
  }
  .divider::before, .divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--gold);
  }
  .divider span { color: var(--gold); font-size: 1rem; }

  .instruction-box {
    text-align: left;
    font-size: 0.88rem;
    line-height: 1.7;
    color: #3a2e1a;
    background: white;
    border-left: 3px solid var(--gold);
    padding: 1rem 1.2rem;
    margin-top: 1rem;
  }

  .instruction-box strong { color: var(--rust); }

  .formula-box {
    margin-top: 1rem;
    padding: 0.8rem 1.2rem;
    background: var(--ink);
    color: var(--paper);
    font-family: 'Playfair Display', serif;
    font-size: 0.95rem;
    text-align: center;
    letter-spacing: 0.02em;
  }

  .formula-box span { color: var(--gold-light); }

  /* Quiz Container */
  .quiz-container {
    max-width: 760px;
    margin: 0 auto;
  }

  .section-header {
    font-family: 'Playfair Display', serif;
    font-size: 0.75rem;
    font-weight: 700;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--gold);
    border-bottom: 1px solid var(--gold);
    padding-bottom: 0.3rem;
    margin: 2rem 0 1rem;
  }

  .question-card {
    background: white;
    border: 1px solid var(--rule);
    border-left: 4px solid var(--gold);
    margin-bottom: 1.2rem;
    padding: 1.4rem 1.6rem;
    box-shadow: 2px 2px 0 var(--shadow);
    transition: border-left-color 0.2s;
  }

  .question-card.answered { border-left-color: var(--moss); }
  .question-card.answered .q-num { background: var(--moss); }

  .q-header {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .q-num {
    background: var(--gold);
    color: white;
    font-family: 'Playfair Display', serif;
    font-weight: 700;
    font-size: 0.8rem;
    padding: 0.2rem 0.5rem;
    min-width: 2rem;
    text-align: center;
    flex-shrink: 0;
    margin-top: 0.15rem;
    transition: background 0.2s;
  }

  .q-text {
    font-size: 0.95rem;
    line-height: 1.6;
    font-weight: 600;
    color: var(--ink);
  }

  .q-scenario {
    font-size: 0.85rem;
    font-style: italic;
    color: #5a4a2a;
    margin-bottom: 1rem;
    padding: 0.7rem 1rem;
    background: var(--cream);
    border-left: 2px solid var(--rule);
    line-height: 1.55;
  }

  .options { display: flex; flex-direction: column; gap: 0.5rem; }

  .option-label {
    display: flex;
    align-items: flex-start;
    gap: 0.8rem;
    padding: 0.65rem 0.9rem;
    border: 1px solid var(--rule);
    cursor: pointer;
    transition: all 0.15s;
    font-size: 0.88rem;
    line-height: 1.5;
    background: var(--paper);
  }

  .option-label:hover { background: var(--cream); border-color: var(--gold); }

  .option-label input { display: none; }

  .option-label.selected {
    background: #f0ead0;
    border-color: var(--gold);
    box-shadow: inset 3px 0 0 var(--gold);
  }

  .opt-key {
    font-family: 'Playfair Display', serif;
    font-weight: 700;
    color: var(--gold);
    font-size: 0.9rem;
    min-width: 1.2rem;
    flex-shrink: 0;
  }

  /* Results */
  .btn-submit {
    display: block;
    margin: 2rem auto 0;
    padding: 1rem 3rem;
    background: var(--ink);
    color: var(--gold-light);
    font-family: 'Playfair Display', serif;
    font-size: 1.1rem;
    font-weight: 700;
    border: 2px solid var(--gold);
    cursor: pointer;
    letter-spacing: 0.08em;
    transition: all 0.2s;
    box-shadow: 4px 4px 0 var(--gold);
  }

  .btn-submit:hover {
    background: var(--gold);
    color: var(--ink);
    box-shadow: 2px 2px 0 var(--ink);
    transform: translate(2px, 2px);
  }

  .btn-submit:disabled { opacity: 0.5; cursor: not-allowed; }

  #results {
    max-width: 760px;
    margin: 2rem auto 0;
    display: none;
  }

  .results-panel {
    background: var(--ink);
    color: var(--paper);
    padding: 2.5rem;
    border: 3px solid var(--gold);
    box-shadow: 6px 6px 0 var(--gold);
  }

  .results-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--gold-light);
    text-align: center;
    margin-bottom: 0.3rem;
    letter-spacing: 0.04em;
  }

  .results-sub {
    text-align: center;
    font-size: 0.8rem;
    letter-spacing: 0.15em;
    color: var(--rule);
    text-transform: uppercase;
    margin-bottom: 2rem;
  }

  .metrics-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.2rem;
    margin-bottom: 2rem;
  }

  @media (max-width: 480px) { .metrics-grid { grid-template-columns: 1fr; } }

  .metric-box {
    border: 1px solid var(--gold);
    padding: 1.2rem;
    text-align: center;
  }

  .metric-label {
    font-size: 0.7rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--rule);
    margin-bottom: 0.4rem;
  }

  .metric-value {
    font-family: 'Playfair Display', serif;
    font-size: 2.5rem;
    font-weight: 900;
    color: var(--gold-light);
    line-height: 1;
  }

  .metric-desc {
    font-size: 0.78rem;
    color: #c8c0a8;
    margin-top: 0.3rem;
    font-style: italic;
  }

  .profile-bar {
    margin: 1.5rem 0;
    padding: 1.2rem;
    border: 1px solid var(--gold);
    background: rgba(184,134,11,0.08);
  }

  .profile-name {
    font-family: 'Playfair Display', serif;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--gold-light);
    margin-bottom: 0.4rem;
  }

  .profile-desc {
    font-size: 0.85rem;
    color: #d0c8b0;
    line-height: 1.6;
  }

  .score-breakdown {
    font-size: 0.82rem;
    color: var(--rule);
    margin-top: 1.5rem;
    border-top: 1px solid rgba(184,134,11,0.3);
    padding-top: 1rem;
    line-height: 1.8;
  }

  .score-breakdown strong { color: var(--gold-light); }

  .methodology-section {
    margin-top: 2rem;
    border-top: 1px solid rgba(184,134,11,0.4);
    padding-top: 1.5rem;
  }

  .method-title {
    font-family: 'Playfair Display', serif;
    font-size: 1rem;
    font-weight: 700;
    color: var(--gold-light);
    letter-spacing: 0.04em;
    margin-bottom: 1.2rem;
    text-align: center;
    text-transform: uppercase;
    font-size: 0.78rem;
    letter-spacing: 0.15em;
  }

  .method-block {
    margin-bottom: 1.2rem;
    padding: 1rem 1.2rem;
    border: 1px solid rgba(184,134,11,0.2);
    background: rgba(255,255,255,0.04);
  }

  .caveat-block {
    border-color: var(--rust);
    background: rgba(139,37,0,0.12);
  }

  .method-heading {
    font-family: 'Playfair Display', serif;
    font-size: 0.88rem;
    font-weight: 700;
    color: var(--gold-light);
    margin-bottom: 0.6rem;
    letter-spacing: 0.03em;
  }

  .caveat-block .method-heading { color: #e08060; }

  .method-body {
    font-size: 0.82rem;
    color: #c8c0a8;
    line-height: 1.75;
  }

  .method-body strong { color: var(--gold-light); }
  .caveat-block .method-body strong { color: #e08060; }
  .method-body em { color: #a89880; }

  .math {
    display: block;
    font-family: 'Playfair Display', serif;
    font-style: italic;
    color: var(--gold-light);
    background: rgba(0,0,0,0.25);
    padding: 0.5rem 1rem;
    margin: 0.6rem 0;
    font-size: 0.88rem;
    letter-spacing: 0.02em;
    border-left: 2px solid var(--gold);
  }

  .caveat-block .math { color: #e0a080; border-left-color: var(--rust); }

  .anchor-table {
    margin: 0.8rem 0 0.4rem;
    border: 1px solid rgba(184,134,11,0.25);
    font-size: 0.78rem;
  }

  .anchor-row {
    display: grid;
    grid-template-columns: 2.5fr 1fr 1.5fr;
    border-bottom: 1px solid rgba(184,134,11,0.15);
  }

  .anchor-row:last-child { border-bottom: none; }

  .anchor-row span {
    padding: 0.4rem 0.7rem;
    color: #c0b898;
    border-right: 1px solid rgba(184,134,11,0.15);
    line-height: 1.4;
  }

  .anchor-row span:last-child { border-right: none; }

  .anchor-row.header-row span {
    background: rgba(184,134,11,0.15);
    color: var(--gold-light);
    font-weight: 600;
    font-size: 0.72rem;
    letter-spacing: 0.06em;
    text-transform: uppercase;
  }

  .btn-reset {
    display: block;
    margin: 1.5rem auto 0;
    padding: 0.7rem 2rem;
    background: transparent;
    color: var(--gold-light);
    font-family: 'Source Serif 4', serif;
    font-size: 0.88rem;
    border: 1px solid var(--gold);
    cursor: pointer;
    letter-spacing: 0.06em;
    transition: all 0.2s;
  }

  .btn-reset:hover { background: rgba(184,134,11,0.1); }

  .progress-bar-wrap {
    max-width: 760px;
    margin: 1.5rem auto 0;
    display: flex;
    align-items: center;
    gap: 1rem;
    font-size: 0.8rem;
    color: #7a6a4a;
  }
  .progress-bar-bg {
    flex: 1;
    height: 6px;
    background: var(--rule);
    border-radius: 0;
  }
  .progress-bar-fill {
    height: 100%;
    background: var(--gold);
    transition: width 0.3s;
    width: 0%;
  }

  .note {
    max-width: 760px;
    margin: 1rem auto 0;
    font-size: 0.78rem;
    color: #7a6a4a;
    font-style: italic;
    text-align: center;
  }
</style>
</head>
<body>

<div class="cover">
  <div class="course-tag">Portfolio Management · Investor Psychology</div>
  <h1>Risk Tolerance &amp; Risk Aversion</h1>
  <div class="subtitle">A Self-Assessment Questionnaire</div>
  <div class="divider"><span>◆</span></div>
  <div class="instruction-box">
    <strong>Instructions:</strong> Each question presents a realistic investment scenario. Select the option that best reflects your personal preference or decision. There are no right or wrong answers — your choices reveal your risk profile.<br><br>
    After completing all questions, your <strong>Risk Aversion Coefficient (A)</strong> and <strong>Risk Tolerance Score (T)</strong> will be computed using the BKM utility framework:<br>
  </div>
  <div class="formula-box">
    Utility: <span>U = E(r) − ½ · A · σ²</span> &nbsp;|&nbsp; Risk Tolerance: <span>T = 1/A</span>
  </div>
</div>

<div class="progress-bar-wrap">
  <span id="progress-text">0 of 13 answered</span>
  <div class="progress-bar-bg"><div class="progress-bar-fill" id="progress-fill"></div></div>
</div>
<p class="note">Based on the investor questionnaire framework in Bodie, Kane &amp; Marcus, <em>Investments</em>, 13e</p>

<div class="quiz-container" id="quiz">

  <div class="section-header">Part I — Investment Choice &amp; Portfolio Allocation</div>

  <!-- Q1 -->
  <div class="question-card" id="card-1">
    <div class="q-header">
      <div class="q-num">1</div>
      <div class="q-text">You have ₹10,00,000 to invest for one year. Which portfolio would you choose?</div>
    </div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,1,'a',2)"><input type="radio" name="q1"> <span class="opt-key">A.</span> Treasury bills yielding 5% — guaranteed return, no risk.</label>
      <label class="option-label" onclick="selectOption(this,1,'b',4)"><input type="radio" name="q1"> <span class="opt-key">B.</span> A diversified equity fund: expected return 10%, standard deviation 12%.</label>
      <label class="option-label" onclick="selectOption(this,1,'c',6)"><input type="radio" name="q1"> <span class="opt-key">C.</span> A growth equity fund: expected return 14%, standard deviation 20%.</label>
      <label class="option-label" onclick="selectOption(this,1,'d',8)"><input type="radio" name="q1"> <span class="opt-key">D.</span> A concentrated sectoral fund: expected return 20%, standard deviation 32%.</label>
    </div>
  </div>

  <!-- Q2 -->
  <div class="question-card" id="card-2">
    <div class="q-header">
      <div class="q-num">2</div>
      <div class="q-text">Consider the following two investment options. Which would you prefer?</div>
    </div>
    <div class="q-scenario">Investment X gives a certain return of 7%. Investment Y has a 50% chance of returning 18% and a 50% chance of returning −2%.</div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,2,'a',2)"><input type="radio" name="q2"> <span class="opt-key">A.</span> Definitely choose Investment X (the certain 7%).</label>
      <label class="option-label" onclick="selectOption(this,2,'b',4)"><input type="radio" name="q2"> <span class="opt-key">B.</span> Lean toward X but would consider Y if the upside were slightly higher.</label>
      <label class="option-label" onclick="selectOption(this,2,'c',6)"><input type="radio" name="q2"> <span class="opt-key">C.</span> It's a close call; both options seem roughly equivalent to me.</label>
      <label class="option-label" onclick="selectOption(this,2,'d',8)"><input type="radio" name="q2"> <span class="opt-key">D.</span> Definitely choose Investment Y — the higher expected return justifies the risk.</label>
    </div>
  </div>

  <!-- Q3 -->
  <div class="question-card" id="card-3">
    <div class="q-header">
      <div class="q-num">3</div>
      <div class="q-text">You are constructing a portfolio. What allocation to risky assets best suits your comfort level?</div>
    </div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,3,'a',2)"><input type="radio" name="q3"> <span class="opt-key">A.</span> 0–20% — I want most of my money in safe instruments.</label>
      <label class="option-label" onclick="selectOption(this,3,'b',4)"><input type="radio" name="q3"> <span class="opt-key">B.</span> 20–40% — A conservative mix with modest equity exposure.</label>
      <label class="option-label" onclick="selectOption(this,3,'c',6)"><input type="radio" name="q3"> <span class="opt-key">C.</span> 40–70% — A balanced portfolio with meaningful equity.</label>
      <label class="option-label" onclick="selectOption(this,3,'d',8)"><input type="radio" name="q3"> <span class="opt-key">D.</span> 70–100% — I am comfortable with heavy equity exposure for better long-run returns.</label>
    </div>
  </div>

  <!-- Q4 -->
  <div class="question-card" id="card-4">
    <div class="q-header">
      <div class="q-num">4</div>
      <div class="q-text">Suppose the risk-free rate is 5% and a risky portfolio offers E(r) = 13% with σ = 20%. Using the mean-variance utility function U = E(r) − ½Aσ², at what value of A would you be indifferent between the two?</div>
    </div>
    <div class="q-scenario">Recall: For indifference, U(risky) = U(risk-free) ⟹ 0.13 − ½A(0.04) = 0.05 ⟹ A = 4.0</div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,4,'a',8)"><input type="radio" name="q4"> <span class="opt-key">A.</span> My A &lt; 4 — I would prefer the risky portfolio (higher utility from it).</label>
      <label class="option-label" onclick="selectOption(this,4,'b',5)"><input type="radio" name="q4"> <span class="opt-key">B.</span> My A ≈ 4 — I am roughly indifferent between the two.</label>
      <label class="option-label" onclick="selectOption(this,4,'c',3)"><input type="radio" name="q4"> <span class="opt-key">C.</span> My A &gt; 4 — I would prefer the risk-free asset.</label>
      <label class="option-label" onclick="selectOption(this,4,'d',2)"><input type="radio" name="q4"> <span class="opt-key">D.</span> My A ≫ 4 — I strongly prefer the risk-free asset regardless of the premium.</label>
    </div>
  </div>

  <div class="section-header">Part II — Reactions to Gains, Losses &amp; Market Events</div>

  <!-- Q5 -->
  <div class="question-card" id="card-5">
    <div class="q-header">
      <div class="q-num">5</div>
      <div class="q-text">Your equity portfolio drops 25% in three months due to a market correction. What do you do?</div>
    </div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,5,'a',2)"><input type="radio" name="q5"> <span class="opt-key">A.</span> Sell all equity immediately to prevent further losses.</label>
      <label class="option-label" onclick="selectOption(this,5,'b',4)"><input type="radio" name="q5"> <span class="opt-key">B.</span> Reduce equity exposure partially and wait for clarity.</label>
      <label class="option-label" onclick="selectOption(this,5,'c',6)"><input type="radio" name="q5"> <span class="opt-key">C.</span> Hold my positions; this is temporary market noise.</label>
      <label class="option-label" onclick="selectOption(this,5,'d',8)"><input type="radio" name="q5"> <span class="opt-key">D.</span> Buy more equity — this is an attractive entry point.</label>
    </div>
  </div>

  <!-- Q6 -->
  <div class="question-card" id="card-6">
    <div class="q-header">
      <div class="q-num">6</div>
      <div class="q-text">You invested ₹5,00,000 and it has grown to ₹6,50,000 in two years. A financial advisor now says there is a 40% chance this doubles further, but also a 40% chance it falls back to your original ₹5,00,000. What do you do?</div>
    </div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,6,'a',2)"><input type="radio" name="q6"> <span class="opt-key">A.</span> Withdraw the entire ₹6,50,000 and lock in the gain.</label>
      <label class="option-label" onclick="selectOption(this,6,'b',4)"><input type="radio" name="q6"> <span class="opt-key">B.</span> Withdraw the ₹1,50,000 profit and keep the original principal invested.</label>
      <label class="option-label" onclick="selectOption(this,6,'c',6)"><input type="radio" name="q6"> <span class="opt-key">C.</span> Keep full ₹6,50,000 invested — the upside justifies staying in.</label>
      <label class="option-label" onclick="selectOption(this,6,'d',8)"><input type="radio" name="q6"> <span class="opt-key">D.</span> Increase my position further — a 40% chance of doubling is very attractive.</label>
    </div>
  </div>

  <!-- Q7 -->
  <div class="question-card" id="card-7">
    <div class="q-header">
      <div class="q-num">7</div>
      <div class="q-text">How do you emotionally respond to investment volatility in your portfolio?</div>
    </div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,7,'a',2)"><input type="radio" name="q7"> <span class="opt-key">A.</span> Severe anxiety — I find it very difficult to handle losses or swings.</label>
      <label class="option-label" onclick="selectOption(this,7,'b',4)"><input type="radio" name="q7"> <span class="opt-key">B.</span> Uncomfortable, but I can manage without making hasty decisions.</label>
      <label class="option-label" onclick="selectOption(this,7,'c',6)"><input type="radio" name="q7"> <span class="opt-key">C.</span> Reasonably calm; I understand market cycles and stay patient.</label>
      <label class="option-label" onclick="selectOption(this,7,'d',8)"><input type="radio" name="q7"> <span class="opt-key">D.</span> Largely unaffected — I view volatility as opportunity, not threat.</label>
    </div>
  </div>

  <div class="section-header">Part III — Time Horizon &amp; Financial Circumstances</div>

  <!-- Q8 -->
  <div class="question-card" id="card-8">
    <div class="q-header">
      <div class="q-num">8</div>
      <div class="q-text">What is the primary investment horizon for this portfolio?</div>
    </div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,8,'a',2)"><input type="radio" name="q8"> <span class="opt-key">A.</span> Less than 2 years — I may need these funds soon.</label>
      <label class="option-label" onclick="selectOption(this,8,'b',4)"><input type="radio" name="q8"> <span class="opt-key">B.</span> 2–5 years — Medium-term goal (home purchase, education).</label>
      <label class="option-label" onclick="selectOption(this,8,'c',6)"><input type="radio" name="q8"> <span class="opt-key">C.</span> 5–15 years — Long-term wealth building or retirement planning.</label>
      <label class="option-label" onclick="selectOption(this,8,'d',8)"><input type="radio" name="q8"> <span class="opt-key">D.</span> More than 15 years — I have ample time to recover from downturns.</label>
    </div>
  </div>

  <!-- Q9 -->
  <div class="question-card" id="card-9">
    <div class="q-header">
      <div class="q-num">9</div>
      <div class="q-text">What percentage of your total net worth does this investment represent?</div>
    </div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,9,'a',2)"><input type="radio" name="q9"> <span class="opt-key">A.</span> More than 75% — This is the bulk of my savings.</label>
      <label class="option-label" onclick="selectOption(this,9,'b',4)"><input type="radio" name="q9"> <span class="opt-key">B.</span> 50–75% — A significant portion.</label>
      <label class="option-label" onclick="selectOption(this,9,'c',6)"><input type="radio" name="q9"> <span class="opt-key">C.</span> 25–50% — A notable but not dominant share.</label>
      <label class="option-label" onclick="selectOption(this,9,'d',8)"><input type="radio" name="q9"> <span class="opt-key">D.</span> Less than 25% — I have sufficient wealth diversification outside this portfolio.</label>
    </div>
  </div>

  <!-- Q10 -->
  <div class="question-card" id="card-10">
    <div class="q-header">
      <div class="q-num">10</div>
      <div class="q-text">How stable and predictable is your current income?</div>
    </div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,10,'a',2)"><input type="radio" name="q10"> <span class="opt-key">A.</span> Very uncertain — freelance, commission-based, or business income.</label>
      <label class="option-label" onclick="selectOption(this,10,'b',4)"><input type="radio" name="q10"> <span class="opt-key">B.</span> Somewhat variable — partially stable but affected by performance.</label>
      <label class="option-label" onclick="selectOption(this,10,'c',6)"><input type="radio" name="q10"> <span class="opt-key">C.</span> Mostly stable — salaried employee with some variable component.</label>
      <label class="option-label" onclick="selectOption(this,10,'d',8)"><input type="radio" name="q10"> <span class="opt-key">D.</span> Very stable — government/academic/pensionable employment with predictable income.</label>
    </div>
  </div>

  <div class="section-header">Part IV — Risk Perception &amp; Investor Beliefs</div>

  <!-- Q11 -->
  <div class="question-card" id="card-11">
    <div class="q-header">
      <div class="q-num">11</div>
      <div class="q-text">Which statement best describes your view on the risk-return tradeoff?</div>
    </div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,11,'a',2)"><input type="radio" name="q11"> <span class="opt-key">A.</span> I strongly prefer preserving capital; returns are secondary.</label>
      <label class="option-label" onclick="selectOption(this,11,'b',4)"><input type="radio" name="q11"> <span class="opt-key">B.</span> Safety first, but I am open to modest risk for somewhat higher returns.</label>
      <label class="option-label" onclick="selectOption(this,11,'c',6)"><input type="radio" name="q11"> <span class="opt-key">C.</span> I accept meaningful risk because higher long-run returns matter to me.</label>
      <label class="option-label" onclick="selectOption(this,11,'d',8)"><input type="radio" name="q11"> <span class="opt-key">D.</span> Maximising returns is my priority; high risk is acceptable to achieve that.</label>
    </div>
  </div>

  <!-- Q12 -->
  <div class="question-card" id="card-12">
    <div class="q-header">
      <div class="q-num">12</div>
      <div class="q-text">A stock you hold surprises the market with strong earnings and jumps 35% in a week. What is your likely response?</div>
    </div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,12,'a',2)"><input type="radio" name="q12"> <span class="opt-key">A.</span> Sell immediately to lock in the unexpected gain.</label>
      <label class="option-label" onclick="selectOption(this,12,'b',4)"><input type="radio" name="q12"> <span class="opt-key">B.</span> Sell half and hold the rest to capture any further upside.</label>
      <label class="option-label" onclick="selectOption(this,12,'c',6)"><input type="radio" name="q12"> <span class="opt-key">C.</span> Hold — the fundamentals justify the new price level.</label>
      <label class="option-label" onclick="selectOption(this,12,'d',8)"><input type="radio" name="q12"> <span class="opt-key">D.</span> Buy more — strong earnings signal continued momentum.</label>
    </div>
  </div>

  <!-- Q13 -->
  <div class="question-card" id="card-13">
    <div class="q-header">
      <div class="q-num">13</div>
      <div class="q-text">Which of the following best describes your investment experience and knowledge?</div>
    </div>
    <div class="options">
      <label class="option-label" onclick="selectOption(this,13,'a',2)"><input type="radio" name="q13"> <span class="opt-key">A.</span> Beginner — I have limited experience and primarily hold savings deposits.</label>
      <label class="option-label" onclick="selectOption(this,13,'b',4)"><input type="radio" name="q13"> <span class="opt-key">B.</span> Intermediate — I invest in mutual funds and have some direct equity exposure.</label>
      <label class="option-label" onclick="selectOption(this,13,'c',6)"><input type="radio" name="q13"> <span class="opt-key">C.</span> Experienced — I actively manage a diversified portfolio including equities and bonds.</label>
      <label class="option-label" onclick="selectOption(this,13,'d',8)"><input type="radio" name="q13"> <span class="opt-key">D.</span> Advanced — I trade derivatives, use leverage, or manage complex multi-asset strategies.</label>
    </div>
  </div>

</div>

<button class="btn-submit" id="submitBtn" onclick="submitQuiz()" disabled>Compute My Risk Profile</button>

<div id="results">
  <div class="results-panel">
    <div class="results-title">Your Risk Profile</div>
    <div class="results-sub">Mean-Variance Utility Framework · BKM Approach</div>
    <div class="metrics-grid">
      <div class="metric-box">
        <div class="metric-label">Risk Aversion Coefficient</div>
        <div class="metric-value" id="res-A">—</div>
        <div class="metric-desc">A = coefficient in U = E(r) − ½Aσ²</div>
      </div>
      <div class="metric-box">
        <div class="metric-label">Risk Tolerance Score</div>
        <div class="metric-value" id="res-T">—</div>
        <div class="metric-desc">T = 1/A &nbsp;(higher = more tolerant)</div>
      </div>
    </div>
    <div class="profile-bar" id="profile-bar">
      <div class="profile-name" id="profile-name">—</div>
      <div class="profile-desc" id="profile-desc">—</div>
    </div>
    <div class="score-breakdown" id="score-breakdown"></div>

    <div class="methodology-section">
      <div class="method-title">How Your Score Was Computed — Methodology Note</div>

      <div class="method-block">
        <div class="method-heading">Step 1 · Raw Score</div>
        <div class="method-body">
          Each question offers four options scored <strong>2, 4, 6, or 8</strong> (low to high risk tolerance).
          With 13 questions, the possible range is:<br>
          <span class="math">Minimum = 13 × 2 = 26 &nbsp;|&nbsp; Maximum = 13 × 8 = 104 &nbsp;|&nbsp; Range = 78</span>
          Your raw score is the simple sum of all 13 option scores.
        </div>
      </div>

      <div class="method-block">
        <div class="method-heading">Step 2 · Min-Max Normalisation</div>
        <div class="method-body">
          The raw score is rescaled to a value between 0 and 1 using min-max normalisation:<br>
          <span class="math">normalised = (raw score − 26) / 78</span>
          This places every student on a common 0–1 scale regardless of how many questions are answered positively or negatively.
          A normalised value of 0 means maximum risk aversion; a value of 1 means maximum risk tolerance.
        </div>
      </div>

      <div class="method-block">
        <div class="method-heading">Step 3 · Mapping to Risk Aversion Coefficient A</div>
        <div class="method-body">
          A is mapped from the normalised score using <strong>linear interpolation</strong> between two anchor points drawn from the BKM framework:
          <div class="anchor-table">
            <div class="anchor-row header-row">
              <span>Investor Type</span><span>Normalised</span><span>A value</span>
            </div>
            <div class="anchor-row">
              <span>Most risk-averse (all A options)</span><span>0</span><span>7.0</span>
            </div>
            <div class="anchor-row">
              <span>Most risk-tolerant (all D options)</span><span>1</span><span>1.5</span>
            </div>
          </div>
          Fitting a straight line A = m·n + c through these two points:<br>
          <span class="math">At n = 0: c = 7.0 &nbsp;|&nbsp; At n = 1: m = 1.5 − 7.0 = −5.5</span>
          <span class="math">∴ &nbsp; A = 7.0 − 5.5 × normalised</span>
          <strong>Verification:</strong> At the midpoint (normalised = 0.5), A = 7.0 − 2.75 = <strong>4.25</strong> — consistent with BKM's representative investor value of A ≈ 4.
        </div>
      </div>

      <div class="method-block">
        <div class="method-heading">Step 4 · Risk Tolerance Score T</div>
        <div class="method-body">
          Risk tolerance is simply the reciprocal of risk aversion, as defined in the BKM utility framework:<br>
          <span class="math">T = 1 / A</span>
          A higher T means greater willingness to bear risk for additional return.
        </div>
      </div>

      <div class="method-block caveat-block">
        <div class="method-heading">⚠ Important Caveat for Class Discussion</div>
        <div class="method-body">
          The boundary values A = 1.5 and A = 7.0 are <strong>assumed</strong>, not derived from first principles.
          In rigorous practice, A is estimated by eliciting <strong>certainty equivalents</strong> — presenting investors with a choice between a guaranteed payoff and a risky gamble, then solving for A analytically from their indifference point using:<br>
          <span class="math">U(certain) = U(risky) &nbsp;⟹&nbsp; r<sub>f</sub> = E(r) − ½ · A · σ² &nbsp;⟹&nbsp; A = 2[E(r) − r<sub>f</sub>] / σ²</span>
          The questionnaire approach here is an <em>approximation</em> — which is precisely how BKM presents it in the textbook. It is useful for pedagogical purposes but should not be used as a precise clinical measure of risk aversion.
        </div>
      </div>

      <div class="method-block">
        <div class="method-heading">A Reference Table — Typical Investor Profiles (BKM)</div>
        <div class="anchor-table">
          <div class="anchor-row header-row">
            <span>A value</span><span>T = 1/A</span><span>Profile</span>
          </div>
          <div class="anchor-row"><span>&lt; 2</span><span>&gt; 0.50</span><span>Very aggressive / Risk-seeking</span></div>
          <div class="anchor-row"><span>2 – 3</span><span>0.33 – 0.50</span><span>Moderately aggressive</span></div>
          <div class="anchor-row"><span>3 – 5</span><span>0.20 – 0.33</span><span>Balanced / Representative investor</span></div>
          <div class="anchor-row"><span>5 – 6</span><span>0.17 – 0.20</span><span>Conservative</span></div>
          <div class="anchor-row"><span>&gt; 6</span><span>&lt; 0.17</span><span>Highly risk-averse</span></div>
        </div>
      </div>

    </div>

    <button class="btn-reset" onclick="resetQuiz()">Reset &amp; Retake</button>
  </div>
</div>

<script>
  const TOTAL = 13;
  const answers = {};

  function selectOption(label, qNum, choice, score) {
    // deselect siblings
    const card = document.getElementById('card-' + qNum);
    card.querySelectorAll('.option-label').forEach(l => l.classList.remove('selected'));
    label.classList.add('selected');

    const wasAnswered = answers[qNum] !== undefined;
    answers[qNum] = score;
    if (!wasAnswered) card.classList.add('answered');

    updateProgress();
  }

  function updateProgress() {
    const count = Object.keys(answers).length;
    document.getElementById('progress-text').textContent = count + ' of ' + TOTAL + ' answered';
    document.getElementById('progress-fill').style.width = (count / TOTAL * 100) + '%';
    document.getElementById('submitBtn').disabled = count < TOTAL;
  }

  function submitQuiz() {
    const total = Object.values(answers).reduce((a, b) => a + b, 0);
    const maxScore = TOTAL * 8;
    const minScore = TOTAL * 2;
    const range = maxScore - minScore;

    // Map score to A: high score → low A (low aversion); low score → high A
    // Score range: 26 to 104
    // A range: 1.5 (very tolerant) to 7.0 (very averse) → inverse mapping
    const normalised = (total - minScore) / range; // 0 to 1
    const A_raw = 7.0 - normalised * 5.5; // maps 0→7.0, 1→1.5
    const A = Math.round(A_raw * 10) / 10;
    const T = Math.round((1 / A) * 100) / 100;

    document.getElementById('res-A').textContent = A.toFixed(1);
    document.getElementById('res-T').textContent = T.toFixed(2);

    let profileName, profileDesc;
    if (A >= 6.0) {
      profileName = "Highly Risk-Averse Investor";
      profileDesc = "You place a very high premium on capital preservation. You derive significantly negative utility from variance and will accept substantially lower expected returns for the comfort of near-certainty. Optimal portfolio: heavy allocation to T-bills, government bonds, and short-duration fixed income instruments. Equity exposure, if any, should be minimal and in low-beta, dividend-yielding stocks.";
    } else if (A >= 4.5) {
      profileName = "Moderately Risk-Averse Investor";
      profileDesc = "You are cautious but not averse to taking measured risk when the reward is commensurate. You would accept a diversified bond-equity portfolio with a tilt toward fixed income. A 30–40% equity allocation within a mean-variance efficient frontier would suit your utility function. Suitable for balanced mutual funds or conservative hybrid strategies.";
    } else if (A >= 3.0) {
      profileName = "Balanced / Mildly Risk-Tolerant Investor";
      profileDesc = "You demonstrate a balanced risk attitude aligned with the 'average' investor profile in the BKM framework (A ≈ 3–4 is typical). You are comfortable with a 50–65% equity allocation and accept moderate portfolio volatility for decent long-run returns. Diversified equity mutual funds and multi-asset portfolios are appropriate for your profile.";
    } else {
      profileName = "Risk-Tolerant / Aggressive Investor";
      profileDesc = "You exhibit high risk tolerance and a strong preference for return maximisation. You are willing to hold highly concentrated or leveraged positions and can psychologically withstand significant drawdowns. A predominantly equity or growth-oriented portfolio (70–100% risky assets) is consistent with your utility function. You may also consider alternative and high-growth instruments.";
    }

    document.getElementById('profile-name').textContent = profileName;
    document.getElementById('profile-desc').textContent = profileDesc;

    // Score breakdown
    const breakdown = `
      <strong>Raw Score:</strong> ${total} / ${maxScore} &nbsp;|&nbsp; 
      <strong>Normalised:</strong> ${(normalised * 100).toFixed(0)}% &nbsp;|&nbsp; 
      <strong>A (Risk Aversion):</strong> ${A.toFixed(1)} &nbsp;|&nbsp; 
      <strong>T (Risk Tolerance):</strong> ${T.toFixed(2)}<br>
      <em>Interpretation:</em> A &lt; 2 → Very aggressive &nbsp;|&nbsp; A = 2–4 → Moderate–Balanced &nbsp;|&nbsp; A = 4–6 → Conservative &nbsp;|&nbsp; A &gt; 6 → Very conservative<br>
      <em>Note:</em> These values are for educational purposes. In practice, A is estimated via elicited certainty equivalents or revealed portfolio choices.
    `;
    document.getElementById('score-breakdown').innerHTML = breakdown;

    document.getElementById('results').style.display = 'block';
    document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });
  }

  function resetQuiz() {
    Object.keys(answers).forEach(k => delete answers[k]);
    document.querySelectorAll('.option-label').forEach(l => l.classList.remove('selected'));
    document.querySelectorAll('.question-card').forEach(c => c.classList.remove('answered'));
    document.getElementById('results').style.display = 'none';
    document.getElementById('submitBtn').disabled = true;
    updateProgress();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
</script>
</body>
</html>
